apiVersion : v1 
kind : Pod

metadata :
  name : Affinity-Antiaffinity
  labels :
    app: sample

spec :
  containers : 
    name : nginx-container
    image : mynginximage:23
    resources :
      requests :
        cpu : "0.5"
        memory : "512Mi"
      limits :
        cpu : "0.5"
        memory : "512Mi"
    ports :
    - containerPort : 80 
    labels : 
      app : my-app
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms :
          - matchExpressions :
            - key : environment
              Operator : In 
              values :
              - production
      podAntiAffinity :
        preferredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchExpressions :
            - key : app
              operator : In
              values :
              - my-app
